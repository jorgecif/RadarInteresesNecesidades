<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Identificaci√≥n intereses y necesidades para proyectos de innovaci√≥n</title>
  <style>
    :root{--bg:#0f172a;--panel:#111827;--ink:#e5e7eb;--muted:#9ca3af;--accent:#22d3ee;--accent-2:#a78bfa;--ok:#34d399;--warn:#f59e0b}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#111827 40%,#0b1025 100%);color:var(--ink);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    header{padding:28px 20px 8px;text-align:center}
    h1{margin:0 0 8px;font-size:clamp(22px,3.2vw,34px);letter-spacing:.2px}
    .sub{color:var(--muted);font-size:14px}
    main{padding:18px;max-width:1100px;margin:0 auto}

    .card{background:rgba(17,24,39,.6);border:1px solid rgba(148,163,184,.16);border-radius:16px;padding:18px}
    .grid{display:grid;gap:14px}
    .g-2{grid-template-columns:repeat(2,1fr)}
    @media (max-width:900px){.g-2{grid-template-columns:1fr}}

    label{display:block;font-weight:600;margin:6px 0 6px}
    input[type="text"],textarea{width:100%;background:#0b1226;color:var(--ink);border:1px solid rgba(148,163,184,.22);border-radius:12px;padding:12px;outline:none;resize:vertical;min-height:48px}
    textarea{min-height:90px}
    input:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(34,211,238,.18)}

    /* Botones */
    button{appearance:none;border:none;color:#0b1025;font-weight:700;background:linear-gradient(135deg,var(--accent),var(--accent-2));padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .08s ease,filter .2s ease,background .3s ease;letter-spacing:.2px;min-height:44px}
    button:hover{filter:brightness(1.05);background:linear-gradient(135deg,var(--accent-2),var(--accent));}
    button:active{transform:translateY(1px)}
    button[disabled]{opacity:0.5;cursor:not-allowed}
    .secondary{background:linear-gradient(135deg,var(--accent-2),var(--accent));color:#fff}
    .secondary:hover{background:linear-gradient(135deg,var(--accent),var(--accent-2));filter:brightness(1.1)}
    .ghost{background:transparent;color:var(--ink);border:1px solid rgba(148,163,184,.3)}

    .pill{display:inline-flex;align-items:center;gap:8px;border:1px dashed rgba(148,163,184,.35);padding:6px 10px;border-radius:999px;color:var(--muted);font-size:12px}
    .footer{color:var(--muted);font-size:12px;text-align:center;margin:20px 0 30px}

    /* Stepper y vistas */
    .views{position:relative}
    .view{display:none}
    .view.active{display:block;animation:fadeSlideIn .35s ease both}
    .nav{display:flex;justify-content:space-between;gap:10px;margin-top:14px}
    .nav .left,.nav .right{display:flex;gap:10px}
    @keyframes fadeSlideIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    .stepper{display:flex;gap:8px;justify-content:center;margin:8px 0 16px}
    .dot{width:10px;height:10px;border-radius:999px;background:#1f2937;border:1px solid rgba(148,163,184,.25)}
    .dot.active{background:linear-gradient(135deg,var(--accent),var(--accent-2));border:none}

    /* Preview */
    .preview{white-space:pre-wrap;background:#0b1226;border:2px solid rgba(148,163,184,.22);padding:12px;border-radius:12px;max-height:300px;overflow:auto;transition:border-color .3s ease}
    @keyframes borderPulse{0%{border-color:#ef4444}50%{border-color:#dc2626}100%{border-color:#ef4444}}
    .preview.dirty{border-color:#ef4444!important;animation:borderPulse 1.5s ease-in-out infinite alternate}

    /* Estados y ayuda */
    .btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626)!important;color:#fff}
    .btn-danger.pulse{animation:pulse 1s ease-in-out infinite alternate}
    @keyframes pulse{from{filter:saturate(1)}to{filter:saturate(1.6)}}
    .hidden{display:none!important}
    .has-tooltip{position:relative}
    .has-tooltip.btn-danger[data-tip]::after{content:attr(data-tip);position:absolute;left:50%;bottom:calc(100% + 10px);transform:translateX(-50%);background:#111827;color:#e5e7eb;border:1px solid rgba(148,163,184,.25);padding:6px 8px;border-radius:8px;font-size:12px;white-space:nowrap;pointer-events:none;opacity:0;transition:opacity .15s ease}
    .has-tooltip.btn-danger:hover[data-tip]::after,.has-tooltip.btn-danger:focus-visible[data-tip]::after{opacity:1}
    .btn-danger::before{content:attr(data-icon);margin-right:8px}

    /* Responsive */
    input[type="text"], textarea { font-size:16px; }
    @media (max-width: 640px){
      header{padding:20px 16px 6px}
      main{padding:12px}
      .card{padding:14px}
      .grid{gap:10px}
      .g-2{grid-template-columns:1fr}
      .toolbar{flex-direction:column;align-items:stretch;gap:8px}
      .toolbar button{width:100%}
      .nav{flex-direction:column;gap:8px}
      .nav .left, .nav .right{width:100%}
      .nav .left button, .nav .right button{width:100%}
      .preview{max-height:45vh}
    }
  </style>
</head>
<body>
  <header>
    <h1>Identificaci√≥n intereses y necesidades para proyectos de innovaci√≥n</h1>
    <div class="sub">Usa los botones <b>Atr√°s</b>/<b>Siguiente</b> para avanzar por los 3 pasos y descargar tu prompt.</div>
  </header>
  <main>
    <div class="stepper" aria-label="Progreso">
      <div class="dot" id="dot0" aria-hidden="true"></div>
      <div class="dot" id="dot1" aria-hidden="true"></div>
      <div class="dot" id="dot2" aria-hidden="true"></div>
    </div>

    <div class="views">
      <!-- Paso 1 -->
      <section id="view0" class="view active card" aria-labelledby="f1">
        <div class="pill">‚ö° Paso 1 ¬∑ Lo que me mueve</div>
        <h2 id="f1">Calentamiento ‚Äì ‚ÄúLo que me mueve‚Äù</h2>
        <label for="f1_entusiasmo">Escribe una frase corta sobre una actividad, tema o situaci√≥n que te entusiasme o te genere curiosidad.</label>
        <input id="f1_entusiasmo" type="text" maxlength="220" placeholder="Ej.: Me entusiasma ense√±ar con tecnolog√≠a / Me frustra perder tiempo en tareas repetitivas" />
        <div class="kpi"><span><b id="f1_count">0</b>/220 caracteres</span><div class="progress"><div id="progressBar" class="progress-bar"></div></div></div>
        <div class="nav">
          <div class="left"><button id="b0back" class="secondary" type="button" disabled>‚¨ÖÔ∏è Atr√°s</button></div>
          <div class="right"><button id="b0next" type="button">Siguiente ‚û°Ô∏è</button></div>
        </div>
      </section>

      <!-- Paso 2 -->
      <section id="view1" class="view card" aria-labelledby="f2">
        <div class="pill">üß≠ Paso 2 ¬∑ Radar de intereses y necesidades</div>
        <h2 id="f2">Radar de intereses y necesidades</h2>
        <div class="grid g-2">
          <div>
            <label for="q_trabajo">üíº Trabajo / estudio</label>
            <textarea id="q_trabajo" placeholder="¬øQu√© te gustar√≠a mejorar o resolver en tu entorno laboral o acad√©mico? Ej.: Automatizar tareas repetitivas en procesos de reporte"></textarea>
          </div>
          <div>
            <label for="q_personal">üè† Vida personal</label>
            <textarea id="q_personal" placeholder="¬øQu√© te molesta o quisieras cambiar en tu d√≠a a d√≠a? Ej.: Organizar mejor mi tiempo y h√°bitos"></textarea>
          </div>
          <div>
            <label for="q_comunidad">üåé Comunidad / entorno</label>
            <textarea id="q_comunidad" placeholder="¬øQu√© problema ves en tu entorno que te genere empat√≠a o inter√©s? Ej.: Falta de reciclaje y educaci√≥n ambiental en el barrio"></textarea>
          </div>
          <div>
            <label for="q_pasiones">‚ù§Ô∏è Pasiones / hobbies</label>
            <textarea id="q_pasiones" placeholder="¬øQu√© tema disfrutas tanto que podr√≠as trabajar en √©l durante horas? Ej.: M√∫sica y creatividad apoyadas con IA"></textarea>
          </div>
        </div>
        <div class="nav">
          <div class="left"><button id="b1back" class="secondary" type="button">‚¨ÖÔ∏è Atr√°s</button></div>
          <div class="right"><button id="b1next" type="button">Siguiente ‚û°Ô∏è</button></div>
        </div>
      </section>

      <!-- Paso 3 -->
      <section id="view2" class="view card" aria-labelledby="f3">
        <div class="pill">üß™ Paso 3 ¬∑ Generaci√≥n de prompt</div>
        <h2 id="f3">Genera tu prompt y exporta</h2>
        <details id="previewBox" class="hidden">
          <summary>Ver prompt</summary>
          <div id="preview" class="preview"></div>
        </details>
        <div class="toolbar">
          <button class="secondary has-tooltip" id="btnPreview" type="button">‚öôÔ∏è Generar prompt</button>
          <button class="ghost" id="btnCopy" type="button" disabled>üìã Copiar texto</button>
          <button id="btnDownload" type="button" disabled>‚¨áÔ∏è Descargar TXT</button>
        </div>
        <div class="chips">
          <span class="chip">Paso 4: Pega este prompt en tu herramienta LLM para obtener 5 posibles temas de innovaci√≥n basados en tus intereses.</span>
        </div>
        <div class="nav">
          <div class="left"><button id="b2back" class="secondary" type="button">‚¨ÖÔ∏è Atr√°s</button></div>
          <div class="right"></div>
        </div>
      </section>
    </div>

    <section class="footer">Privado en tu navegador: no se env√≠an datos a ning√∫n servidor.</section>
  </main>

  <script>
    // ========= Helpers =========
    const $ = (id)=>document.getElementById(id);
    const fields = { entusiasmo:$('f1_entusiasmo'), trabajo:$('q_trabajo'), personal:$('q_personal'), comunidad:$('q_comunidad'), pasiones:$('q_pasiones'), preview:$('preview') };

    // Paso 1 contador/progreso
    const f1Count=$('f1_count'),progressBar=$('progressBar');
    fields.entusiasmo.addEventListener('input',()=>{const len=fields.entusiasmo.value.length;f1Count.textContent=len;progressBar.style.width=Math.min((len/220)*100,100)+'%';markDirtyIfChanged();});

    // Navegaci√≥n
    const views=[$('view0'),$('view1'),$('view2')]; const dots=[$('dot0'),$('dot1'),$('dot2')]; let step=0;
    const clamp=(n,min,max)=>Math.max(min,Math.min(max,n));
    function showStep(n){ step=clamp(n,0,views.length-1); views.forEach((v,i)=>v.classList.toggle('active',i===step)); dots.forEach((d,i)=>d.classList.toggle('active',i<=step)); $('b0back').disabled=step===0; }
    $('b0next').addEventListener('click',()=>showStep(1));
    $('b1next').addEventListener('click',()=>showStep(2));
    $('b1back').addEventListener('click',()=>showStep(0));
    $('b2back').addEventListener('click',()=>showStep(1));

    document.addEventListener('keydown',e=>{const tag=document.activeElement.tagName;if(['INPUT','TEXTAREA','SELECT'].includes(tag))return; if(e.key==='ArrowRight'||e.key==='PageDown')showStep(step+1); if(e.key==='ArrowLeft'||e.key==='PageUp')showStep(step-1);});

    // Estado de sincronizaci√≥n
    let lastDataJSON=null; // snapshot de los datos usados en el preview
    const sanitize = s => (s||'').toString().trim();
    const getData = () => ({ entusiasmo:sanitize(fields.entusiasmo.value), trabajo:sanitize(fields.trabajo.value), personal:sanitize(fields.personal.value), comunidad:sanitize(fields.comunidad.value), pasiones:sanitize(fields.pasiones.value) });
    const currentDataJSON = () => JSON.stringify(getData());

    function markDirtyIfChanged(){
      if(!lastDataJSON) return; // a√∫n no se ha generado
      const dirty = currentDataJSON() !== lastDataJSON;
      const btn=$('btnPreview');
      const box=$('preview');
      btn.classList.toggle('btn-danger',dirty);
      btn.classList.toggle('pulse',dirty);
      box.classList.toggle('dirty',dirty);
      if(dirty){ btn.setAttribute('data-tip','Tienes cambios sin generar'); btn.setAttribute('data-icon','‚ö†Ô∏è'); }
      else { btn.removeAttribute('data-tip'); btn.removeAttribute('data-icon'); }
    }

    ;['entusiasmo','trabajo','personal','comunidad','pasiones'].forEach(k=>{ fields[k].addEventListener('input',markDirtyIfChanged); fields[k].addEventListener('change',markDirtyIfChanged); });

    // Generaci√≥n del prompt
    function makePrompt(){ const d=getData(); return (
`Act√∫a como un facilitador de innovaci√≥n. A partir de la informaci√≥n que te doy a continuaci√≥n, ay√∫dame a identificar posibles temas o necesidades personales desde los cuales podr√≠a plantear un proyecto de innovaci√≥n.\n\n`+
`Mi motivaci√≥n principal es: ${d.entusiasmo||'‚Äî'}\n\n`+
`Aspectos que me interesan o me generan necesidad:\n`+
`‚Ä¢ Trabajo/estudio: ${d.trabajo||'‚Äî'}\n`+
`‚Ä¢ Vida personal: ${d.personal||'‚Äî'}\n`+
`‚Ä¢ Comunidad/entorno: ${d.comunidad||'‚Äî'}\n`+
`‚Ä¢ Pasiones/hobbies: ${d.pasiones||'‚Äî'}\n\n`+
`Con base en esto, entrega el siguiente resultado estructurado:\n`+
`1. Tema o necesidad personal identificada (breve descripci√≥n).\n`+
`2. Una frase tipo: ‚ÄúPodr√≠a innovar en algo relacionado con __________ porque __________‚Äù.\n`+
`3. Prop√≥n 5 opciones de tema-pregunta que podr√≠an orientar un futuro proyecto de innovaci√≥n.\n`+
`Usa un lenguaje claro y motivador. Responde en espa√±ol.\n`
    ); }

    const updatePreview = ()=>{ $('preview').textContent = makePrompt(); };

    function downloadTxt(){ const blob=new Blob([makePrompt()],{type:'text/plain;charset=utf-8'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='prompt_innovacion_'+new Date().toISOString().slice(0,10)+'.txt'; a.click(); URL.revokeObjectURL(url); }
    function copyToClipboard(){ navigator.clipboard.writeText(makePrompt()).then(()=>feedback('Copiado ‚úÖ')).catch(()=>feedback('Error al copiar',true)); }

    function feedback(msg,warn){ const bar=document.createElement('div'); bar.textContent=msg; bar.style.position='fixed'; bar.style.bottom='16px'; bar.style.left='50%'; bar.style.transform='translateX(-50%)'; bar.style.padding='10px 14px'; bar.style.borderRadius='12px'; bar.style.zIndex='9999'; bar.style.background=warn?'linear-gradient(135deg,var(--warn),#ef4444)':'linear-gradient(135deg,var(--ok),#10b981)'; bar.style.color='#07131f'; bar.style.fontWeight='700'; bar.style.boxShadow='0 6px 24px rgba(0,0,0,.35)'; document.body.appendChild(bar); setTimeout(()=>bar.remove(),2300); }

    function generatePrompt(){
      updatePreview();
      const box=$('previewBox'); if(box){ box.classList.remove('hidden'); box.open=true; }
      $('btnCopy').disabled=false; $('btnDownload').disabled=false;
      const btn=$('btnPreview');
      lastDataJSON=currentDataJSON();
      btn.classList.remove('btn-danger','pulse');
      $('preview').classList.remove('dirty');
      if(!btn.dataset.regen){ btn.textContent='üîÅ Re-generar'; btn.dataset.regen='1'; }
      btn.removeAttribute('data-tip'); btn.removeAttribute('data-icon');
      feedback('Prompt generado ‚úÖ');
    }

    $('btnPreview').addEventListener('click',generatePrompt);
    $('btnDownload').addEventListener('click',()=>{ if(!$('btnDownload').disabled) downloadTxt(); });
    $('btnCopy').addEventListener('click',()=>{ if(!$('btnCopy').disabled) copyToClipboard(); });

    // Inicio siempre en Paso 1
    showStep(0);

    // ===== Tests (consola) =====
    (function runTests(){
      const results=[];
      const prevStep=step;
      const prevTrabajoVal = fields.trabajo.value; // snapshot del valor real del usuario
      const prevLastSnapshot = lastDataJSON;       // snapshot del estado de sincronizaci√≥n

      // clamp
      results.push({name:'clamp inferior', pass: (Math.max(0,Math.min(2,-5))===0)});
      results.push({name:'clamp superior', pass: (Math.max(0,Math.min(2,9))===2)});
      // showStep l√≠mites (y restaurar)
      try{ showStep(-1); const a=(step===0); showStep(99); const b=(step===2); results.push({name:'showStep l√≠mites', pass:a&&b}); }catch(e){ results.push({name:'showStep l√≠mites', pass:false, err:e}); }
      // estados iniciales
      results.push({name:'copy disabled al inicio', pass: $('btnCopy').disabled===true});
      results.push({name:'download disabled al inicio', pass: $('btnDownload').disabled===true});
      results.push({name:'preview oculto al inicio', pass: document.getElementById('previewBox').classList.contains('hidden')});
      results.push({name:'preview vac√≠o al inicio', pass: $('preview').textContent.length===0});
      // dirty solo si hay snapshot (usar valores temporales y restaurar al final)
      const beforeDirty=$('btnPreview').classList.contains('btn-danger');
      fields.trabajo.value='x'; fields.trabajo.dispatchEvent(new Event('input'));
      const dirtyOff=!$('btnPreview').classList.contains('btn-danger');
      lastDataJSON=currentDataJSON(); // snapshot con 'x'
      fields.trabajo.value='y'; fields.trabajo.dispatchEvent(new Event('input'));
      const dirtyOn=$('btnPreview').classList.contains('btn-danger');
      results.push({name:'dirty sin snapshot apagado', pass: !beforeDirty && dirtyOff});
      results.push({name:'dirty con snapshot encendido', pass: dirtyOn});

      // --- Restaurar estado real del usuario ---
      fields.trabajo.value = prevTrabajoVal; // devolver el valor original
      fields.trabajo.dispatchEvent(new Event('input'));
      lastDataJSON = prevLastSnapshot;       // devolver snapshot original
      showStep(prevStep);                    // devolver paso original

      console.log('Self-tests:',results);
    })();
  </script>
</body>
</html>





